{
  "fecha_validacion": "2025-09-06T00:33:46.065005",
  "n0_listo_para_n1": false,
  "versionado": {
    "total_facturas": 6,
    "facturas_nuevas": 0,
    "facturas_actualizadas": 2,
    "facturas_ignoradas": 4,
    "errores": 0,
    "mejoras_detectadas": [
      {
        "factura": "N0_UNKNOWN_20210228_211039.json",
        "version_anterior": 2,
        "version_nueva": 3,
        "campos_nuevos": [
          "client.nif_titular",
          "contract_3x3.comercializadora",
          "contract_3x3.cups_electricidad",
          "contract_3x3.distribuidora",
          "contract_3x3.fecha_fin_contrato",
          "contract_3x3.fecha_inicio_contrato",
          "contract_3x3.mercado",
          "contract_3x3.nombre_producto",
          "contract_3x3.numero_contrato_comercializadora",
          "contract_3x3.numero_contrato_distribuidora",
          "contract_3x3.potencia_contratada_p1",
          "contract_3x3.potencia_contratada_p2",
          "contract_3x3.potencia_contratada_p3",
          "contract_3x3.precio_unitario_potencia_p1",
          "contract_3x3.precio_unitario_potencia_p2",
          "contract_3x3.precio_unitario_potencia_p3",
          "contract_3x3.tarifa_acceso",
          "invoice_3x3.ajuste_mecanismo_iberico",
          "invoice_3x3.alquiler_contador",
          "invoice_3x3.autoconsumo",
          "invoice_3x3.año",
          "invoice_3x3.bono_social",
          "invoice_3x3.consumo_facturado_capacitiva_p1",
          "invoice_3x3.consumo_facturado_capacitiva_p2",
          "invoice_3x3.consumo_facturado_capacitiva_p3",
          "invoice_3x3.consumo_facturado_kwh_p1",
          "invoice_3x3.consumo_facturado_kwh_p2",
          "invoice_3x3.consumo_facturado_kwh_p3",
          "invoice_3x3.consumo_facturado_reactiva_p1",
          "invoice_3x3.consumo_facturado_reactiva_p2",
          "invoice_3x3.consumo_facturado_reactiva_p3",
          "invoice_3x3.consumo_medido_capacitiva_p1",
          "invoice_3x3.consumo_medido_capacitiva_p2",
          "invoice_3x3.consumo_medido_capacitiva_p3",
          "invoice_3x3.consumo_medido_kwh_p1",
          "invoice_3x3.consumo_medido_kwh_p2",
          "invoice_3x3.consumo_medido_kwh_p3",
          "invoice_3x3.consumo_medido_reactiva_p1",
          "invoice_3x3.consumo_medido_reactiva_p2",
          "invoice_3x3.consumo_medido_reactiva_p3",
          "invoice_3x3.consumo_promedio_diario_kwh",
          "invoice_3x3.consumo_reactiva_total",
          "invoice_3x3.coste_cargos_energia_p1",
          "invoice_3x3.coste_cargos_energia_p2",
          "invoice_3x3.coste_cargos_energia_p3",
          "invoice_3x3.coste_cargos_potencia_p1",
          "invoice_3x3.coste_cargos_potencia_p2",
          "invoice_3x3.coste_cargos_potencia_p3",
          "invoice_3x3.coste_energia_p1",
          "invoice_3x3.coste_energia_p2",
          "invoice_3x3.coste_energia_p3",
          "invoice_3x3.coste_energia_total",
          "invoice_3x3.coste_exceso_potencia_p1",
          "invoice_3x3.coste_exceso_potencia_p2",
          "invoice_3x3.coste_exceso_potencia_p3",
          "invoice_3x3.coste_excesos_energia_reactiva",
          "invoice_3x3.coste_margen_comercializadora_p1",
          "invoice_3x3.coste_margen_comercializadora_p2",
          "invoice_3x3.coste_margen_comercializadora_p3",
          "invoice_3x3.coste_margen_comercializadora_potencia_p1",
          "invoice_3x3.coste_margen_comercializadora_potencia_p2",
          "invoice_3x3.coste_margen_comercializadora_potencia_p3",
          "invoice_3x3.coste_otro_concepto",
          "invoice_3x3.coste_otro_servicio",
          "invoice_3x3.coste_peaje_p1",
          "invoice_3x3.coste_peaje_p2",
          "invoice_3x3.coste_peaje_p3",
          "invoice_3x3.coste_peaje_potencia_p1",
          "invoice_3x3.coste_peaje_potencia_p2",
          "invoice_3x3.coste_peaje_potencia_p3",
          "invoice_3x3.coste_potencia_p1",
          "invoice_3x3.coste_potencia_p2",
          "invoice_3x3.coste_potencia_p3",
          "invoice_3x3.coste_potencia_total",
          "invoice_3x3.coste_promedio_diario_eur",
          "invoice_3x3.coste_total_energia_p1",
          "invoice_3x3.coste_total_energia_p2",
          "invoice_3x3.coste_total_energia_p3",
          "invoice_3x3.coste_total_potencia_p1",
          "invoice_3x3.coste_total_potencia_p2",
          "invoice_3x3.coste_total_potencia_p3",
          "invoice_3x3.descuento_energia",
          "invoice_3x3.descuento_otro_concepto",
          "invoice_3x3.descuento_potencia",
          "invoice_3x3.descuento_servicio",
          "invoice_3x3.dias_periodo_facturado",
          "invoice_3x3.energia_reactiva_facturar_p1",
          "invoice_3x3.energia_reactiva_facturar_p2",
          "invoice_3x3.energia_reactiva_facturar_p3",
          "invoice_3x3.energia_reactiva_facturar_total",
          "invoice_3x3.energia_vertida_kwh",
          "invoice_3x3.fecha_cargo",
          "invoice_3x3.fecha_emision",
          "invoice_3x3.fecha_fin_periodo",
          "invoice_3x3.fecha_inicio_periodo",
          "invoice_3x3.importe_compensacion_excedentes",
          "invoice_3x3.importe_impuesto_electricidad",
          "invoice_3x3.margen_comercializadora_p1",
          "invoice_3x3.margen_comercializadora_p2",
          "invoice_3x3.margen_comercializadora_p3",
          "invoice_3x3.margen_comercializadora_potencia_p1",
          "invoice_3x3.margen_comercializadora_potencia_p2",
          "invoice_3x3.margen_comercializadora_potencia_p3",
          "invoice_3x3.numero_factura",
          "invoice_3x3.numero_factura_rectificada",
          "invoice_3x3.penalizacion_reactiva_p1",
          "invoice_3x3.penalizacion_reactiva_p2",
          "invoice_3x3.penalizacion_reactiva_p3",
          "invoice_3x3.porcentaje_impuesto_electricidad",
          "invoice_3x3.potencia_facturada_p1",
          "invoice_3x3.potencia_facturada_p2",
          "invoice_3x3.potencia_facturada_p3",
          "invoice_3x3.potencia_maxima_demandada_año_kw_p1",
          "invoice_3x3.potencia_maxima_demandada_año_kw_p2",
          "invoice_3x3.potencia_maxima_demandada_año_kw_p3",
          "invoice_3x3.potencia_maxima_demandada_factura_p1",
          "invoice_3x3.potencia_maxima_demandada_factura_p2",
          "invoice_3x3.potencia_maxima_demandada_factura_p3",
          "invoice_3x3.precio_cargos_energia_p1",
          "invoice_3x3.precio_cargos_energia_p2",
          "invoice_3x3.precio_cargos_energia_p3",
          "invoice_3x3.precio_cargos_potencia_p1",
          "invoice_3x3.precio_cargos_potencia_p2",
          "invoice_3x3.precio_cargos_potencia_p3",
          "invoice_3x3.precio_energia_p1",
          "invoice_3x3.precio_energia_p2",
          "invoice_3x3.precio_energia_p3",
          "invoice_3x3.precio_peaje_p1",
          "invoice_3x3.precio_peaje_p2",
          "invoice_3x3.precio_peaje_p3",
          "invoice_3x3.precio_peaje_potencia_p1",
          "invoice_3x3.precio_peaje_potencia_p2",
          "invoice_3x3.precio_peaje_potencia_p3",
          "invoice_3x3.precio_potencia_p1",
          "invoice_3x3.precio_potencia_p2",
          "invoice_3x3.precio_potencia_p3",
          "invoice_3x3.precio_total_energia_p1",
          "invoice_3x3.precio_total_energia_p2",
          "invoice_3x3.precio_total_energia_p3",
          "invoice_3x3.precio_total_potencia_p1",
          "invoice_3x3.precio_total_potencia_p2",
          "invoice_3x3.precio_total_potencia_p3",
          "invoice_3x3.total_a_pagar",
          "invoice_3x3.url_qr_comparador_cnmc",
          "metering_3x3.fecha_lectura_fin_contador",
          "metering_3x3.fecha_lectura_inicio_contador",
          "metering_3x3.lectura_actual_contador_p1",
          "metering_3x3.lectura_actual_contador_p2",
          "metering_3x3.lectura_actual_contador_p3",
          "metering_3x3.lectura_anterior_contador_p1",
          "metering_3x3.lectura_anterior_contador_p2",
          "metering_3x3.lectura_anterior_contador_p3",
          "metering_3x3.numero_contador",
          "metering_3x3.tipo_lectura_contador"
        ],
        "mejora_calidad": 0.5888888888888889
      },
      {
        "factura": "N0_ES0021000005178445GS_20240916_211210.json",
        "version_anterior": 3,
        "version_nueva": 4,
        "campos_nuevos": [
          "client.nif_titular.confidence",
          "client.nif_titular.pattern",
          "client.nif_titular.source",
          "client.nif_titular.value",
          "contract_2x3.comercializadora",
          "contract_2x3.cups_electricidad",
          "contract_2x3.distribuidora",
          "contract_2x3.fecha_fin_contrato",
          "contract_2x3.fecha_inicio_contrato",
          "contract_2x3.mercado",
          "contract_2x3.nombre_producto",
          "contract_2x3.numero_contrato_comercializadora",
          "contract_2x3.numero_contrato_distribuidora",
          "contract_2x3.potencia_contratada_p1",
          "contract_2x3.potencia_contratada_p2",
          "contract_2x3.precio_unitario_potencia_p1",
          "contract_2x3.precio_unitario_potencia_p2",
          "contract_2x3.tarifa_acceso",
          "id_cups",
          "id_cups_confianza",
          "id_cups_pais",
          "invoice_2x3.ajuste_mecanismo_iberico",
          "invoice_2x3.alquiler_contador",
          "invoice_2x3.autoconsumo",
          "invoice_2x3.año",
          "invoice_2x3.bono_social",
          "invoice_2x3.consumo_facturado_capacitiva_p1",
          "invoice_2x3.consumo_facturado_capacitiva_p2",
          "invoice_2x3.consumo_facturado_capacitiva_p3",
          "invoice_2x3.consumo_facturado_kwh_p1",
          "invoice_2x3.consumo_facturado_kwh_p2",
          "invoice_2x3.consumo_facturado_kwh_p3",
          "invoice_2x3.consumo_facturado_reactiva_p1",
          "invoice_2x3.consumo_facturado_reactiva_p2",
          "invoice_2x3.consumo_facturado_reactiva_p3",
          "invoice_2x3.consumo_medido_capacitiva_p1",
          "invoice_2x3.consumo_medido_capacitiva_p2",
          "invoice_2x3.consumo_medido_capacitiva_p3",
          "invoice_2x3.consumo_medido_kwh_p1",
          "invoice_2x3.consumo_medido_kwh_p2",
          "invoice_2x3.consumo_medido_kwh_p3",
          "invoice_2x3.consumo_medido_reactiva_p1",
          "invoice_2x3.consumo_medido_reactiva_p2",
          "invoice_2x3.consumo_medido_reactiva_p3",
          "invoice_2x3.consumo_promedio_diario_kwh",
          "invoice_2x3.coste_cargos_energia_p1",
          "invoice_2x3.coste_cargos_energia_p2",
          "invoice_2x3.coste_cargos_energia_p3",
          "invoice_2x3.coste_cargos_potencia_p1",
          "invoice_2x3.coste_cargos_potencia_p2",
          "invoice_2x3.coste_energia_p1",
          "invoice_2x3.coste_energia_p2",
          "invoice_2x3.coste_energia_p3",
          "invoice_2x3.coste_energia_total",
          "invoice_2x3.coste_margen_comercializadora_p1",
          "invoice_2x3.coste_margen_comercializadora_p2",
          "invoice_2x3.coste_margen_comercializadora_p3",
          "invoice_2x3.coste_margen_comercializadora_potencia_p1",
          "invoice_2x3.coste_margen_comercializadora_potencia_p2",
          "invoice_2x3.coste_otro_concepto",
          "invoice_2x3.coste_otro_servicio",
          "invoice_2x3.coste_peaje_p1",
          "invoice_2x3.coste_peaje_p2",
          "invoice_2x3.coste_peaje_p3",
          "invoice_2x3.coste_peaje_potencia_p1",
          "invoice_2x3.coste_peaje_potencia_p2",
          "invoice_2x3.coste_potencia_p1",
          "invoice_2x3.coste_potencia_p2",
          "invoice_2x3.coste_potencia_total",
          "invoice_2x3.coste_promedio_diario_eur",
          "invoice_2x3.coste_total_energia_p1",
          "invoice_2x3.coste_total_energia_p2",
          "invoice_2x3.coste_total_energia_p3",
          "invoice_2x3.coste_total_potencia_p1",
          "invoice_2x3.coste_total_potencia_p2",
          "invoice_2x3.descuento_energia",
          "invoice_2x3.descuento_otro_concepto",
          "invoice_2x3.descuento_potencia",
          "invoice_2x3.descuento_servicio",
          "invoice_2x3.dias_periodo_facturado",
          "invoice_2x3.energia_vertida_kwh",
          "invoice_2x3.fecha_cargo",
          "invoice_2x3.fecha_emision",
          "invoice_2x3.fecha_fin_periodo",
          "invoice_2x3.fecha_inicio_periodo",
          "invoice_2x3.importe_compensacion_excedentes",
          "invoice_2x3.importe_impuesto_electricidad",
          "invoice_2x3.margen_comercializadora_p1",
          "invoice_2x3.margen_comercializadora_p2",
          "invoice_2x3.margen_comercializadora_p3",
          "invoice_2x3.margen_comercializadora_potencia_p1",
          "invoice_2x3.margen_comercializadora_potencia_p2",
          "invoice_2x3.numero_factura",
          "invoice_2x3.numero_factura_rectificada",
          "invoice_2x3.porcentaje_impuesto_electricidad",
          "invoice_2x3.potencia_facturada_p1",
          "invoice_2x3.potencia_facturada_p2",
          "invoice_2x3.potencia_maxima_demandada_año_kw_p1",
          "invoice_2x3.potencia_maxima_demandada_año_kw_p2",
          "invoice_2x3.potencia_maxima_demandada_factura_p1",
          "invoice_2x3.potencia_maxima_demandada_factura_p2",
          "invoice_2x3.precio_cargos_energia_p1",
          "invoice_2x3.precio_cargos_energia_p2",
          "invoice_2x3.precio_cargos_energia_p3",
          "invoice_2x3.precio_cargos_potencia_p1",
          "invoice_2x3.precio_cargos_potencia_p2",
          "invoice_2x3.precio_energia_p1",
          "invoice_2x3.precio_energia_p2",
          "invoice_2x3.precio_energia_p3",
          "invoice_2x3.precio_peaje_p1",
          "invoice_2x3.precio_peaje_p2",
          "invoice_2x3.precio_peaje_p3",
          "invoice_2x3.precio_peaje_potencia_p1",
          "invoice_2x3.precio_peaje_potencia_p2",
          "invoice_2x3.precio_potencia_p1",
          "invoice_2x3.precio_potencia_p2",
          "invoice_2x3.precio_total_energia_p1",
          "invoice_2x3.precio_total_energia_p2",
          "invoice_2x3.precio_total_energia_p3",
          "invoice_2x3.precio_total_potencia_p1",
          "invoice_2x3.precio_total_potencia_p2",
          "invoice_2x3.total_a_pagar",
          "invoice_2x3.url_qr_comparador_cnmc",
          "metering_2x3.fecha_lectura_fin_contador",
          "metering_2x3.fecha_lectura_inicio_contador",
          "metering_2x3.lectura_actual_contador_p1",
          "metering_2x3.lectura_actual_contador_p2",
          "metering_2x3.lectura_actual_contador_p3",
          "metering_2x3.lectura_anterior_contador_p1",
          "metering_2x3.lectura_anterior_contador_p2",
          "metering_2x3.lectura_anterior_contador_p3",
          "metering_2x3.numero_contador",
          "metering_2x3.tipo_lectura_contador",
          "supply_point.datos_suministro.numero_contrato_poliza"
        ],
        "mejora_calidad": 0.5888888888888889
      }
    ],
    "estadisticas_calidad": {
      "excelente": 0,
      "buena": 0,
      "regular": 2,
      "mala": 0
    }
  },
  "schemas": {
    "validacion_exitosa": false,
    "coincidencia_suficiente": false
  },
  "recomendaciones": [
    "⚠️ N0 requiere mejoras antes de N1",
    "🔧 Priorizar resolución de acciones requeridas",
    "📈 Re-ejecutar validación tras implementar mejoras"
  ],
  "acciones_requeridas": [
    "Mejorar extracción OCR para aumentar coincidencia de campos con schemas"
  ]
}